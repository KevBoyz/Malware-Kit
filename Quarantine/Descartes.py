# I'm a file? A dream?
# I really exist?
# Your files are now going through an existential crisis.
# This code encrypts everything he finds along the way.
# Remember to use a good password.

from os import walk
from os.path import join


def read_file(file_path):
    with open(file_path, 'rb') as file:
        return bytearray(file.read())


def cryptograph(file_path, file_content, passw):
    with open(file_path, 'wb') as file:
        encode = bytearray()
        for i, b in enumerate(file_content):
            passw_index = i % len(passw)
            encode.append(b ^ ord(passw[passw_index]))
        file.write(encode)


print('Descartes 1.1 by KevBoyz')
password = str(input('Password: '))

for folder, sub_folders, files in walk('.'):
    for file in files:
        if file != 'Descartes.py':
            path = join(folder, file)
            content = read_file(path)
            cryptograph(path, content, password)

